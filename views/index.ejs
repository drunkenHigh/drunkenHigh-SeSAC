<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('include/include', { title : 'DRUNKEN HIGH' }) %>
    <link rel="stylesheet" href="/public/css/main.css" />
  </head>
  <body>
    <%- include('./partials/cookie.ejs') %> 
    <%- include('./partials/header.ejs')%>
    <%- include('./partials/login.ejs')%>
    <main>
      <section class="main__recommend">
          <div class="recommend-container swiper-container">
            <div class="recommend-text">
                <h2 class="recommend-title">
                    <span class="magic">
                        <span class="magic-star">
                            <svg viewBox="0 0 512 512">
                                <path d="M512 255.1c0 11.34-7.406 20.86-18.44 23.64l-171.3 42.78l-42.78 171.1C276.7 504.6 267.2 512 255.9 512s-20.84-7.406-23.62-18.44l-42.66-171.2L18.47 279.6C7.406 276.8 0 267.3 0 255.1c0-11.34 7.406-20.83 18.44-23.61l171.2-42.78l42.78-171.1C235.2 7.406 244.7 0 256 0s20.84 7.406 23.62 18.44l42.78 171.2l171.2 42.78C504.6 235.2 512 244.6 512 255.1z" />
                            </svg>
                        </span>
                        <span class="magic-star">
                            <svg viewBox="0 0 512 512">
                                <path d="M512 255.1c0 11.34-7.406 20.86-18.44 23.64l-171.3 42.78l-42.78 171.1C276.7 504.6 267.2 512 255.9 512s-20.84-7.406-23.62-18.44l-42.66-171.2L18.47 279.6C7.406 276.8 0 267.3 0 255.1c0-11.34 7.406-20.83 18.44-23.61l171.2-42.78l42.78-171.1C235.2 7.406 244.7 0 256 0s20.84 7.406 23.62 18.44l42.78 171.2l171.2 42.78C504.6 235.2 512 244.6 512 255.1z" />
                            </svg>
                        </span>
                        <span class="magic-star">
                            <svg viewBox="0 0 512 512">
                                <path d="M512 255.1c0 11.34-7.406 20.86-18.44 23.64l-171.3 42.78l-42.78 171.1C276.7 504.6 267.2 512 255.9 512s-20.84-7.406-23.62-18.44l-42.66-171.2L18.47 279.6C7.406 276.8 0 267.3 0 255.1c0-11.34 7.406-20.83 18.44-23.61l171.2-42.78l42.78-171.1C235.2 7.406 244.7 0 256 0s20.84 7.406 23.62 18.44l42.78 171.2l171.2 42.78C504.6 235.2 512 244.6 512 255.1z" />
                            </svg>
                        </span>
                        <span class="title-emoji">üëç</span>
                        <span class="title-text">BEST 10</span>
                    </span>
                </h2>
                <p class="recommend-desc">ÏßÄÍ∏à Ïù∏Í∏∞ÏûàÎäî Î†àÏãúÌîºÎ•º ÎßåÎÇòÎ≥¥ÏÑ∏Ïöî!</p>
            </div>
            <!-- left swiper -->
            <div class="recommend-leftSwiper">
                <ul class="swiper-wrapper">
                    <% const order = [9,0,1,2,3,4,5,6,7,8] %>  
                    <% if(bestLists){ %>
                        <% if(bestLists.length >= 10){ %> 
                        <% order.forEach(index => { %>
                            <li class="swiper-slide">
                                <a href="/recipe/read?recipe_num=<%= bestLists[index].recipe_num%>">
                                    <div class="slide-subbg"></div>
                                    <figure>
                                        <%if(bestLists[index]['Recipe_Imgs.image_url']){%>
                                        <img src="<%= image_path%><%= bestLists[index]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}else {%>
                                        <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}%>
                                    </figure>
                                </a>
                            </li>
                        <%})} else {%> 
                        <% for(let i = 0; i < bestLists.length ; i++){ %>    
                            <li class="swiper-slide">
                                <a href="/recipe/read?recipe_num=<%= bestLists[i].recipe_num%>">
                                    <div class="slide-subbg"></div>
                                    <figure>
                                        <%if(bestLists[i]['Recipe_Imgs.image_url']){%>
                                        <img src="<%= image_path%><%= bestLists[i]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}else {%>
                                        <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}%>
                                    </figure>
                                </a>
                            </li>
                    <%}}} else { %>
                        <li>ÌïòÏù¥Î≥º Î†àÏãúÌîºÎ•º Ïò¨Î†§Ï£ºÏÑ∏Ïöî</li>
                    <%} %>
                </ul>
            </div>
            <!-- center swiper -->
            <div class="recommend-centerSwiper">
                <ul class="swiper-wrapper">
                    <% if(bestLists){ %>
                    <% if(bestLists.length >= 10){ %>
                    <% for(let i = 0; i < 10 ; i++){ %>
                            <li class="swiper-slide">
                                <a href="/recipe/read?recipe_num=<%= bestLists[i].recipe_num%>">
                                    
                                    <div class="slide-bg">
                                        <div class="recipe__likescounts">
                                            <span class="fa-solid fa-heart"></span>
                                            <span><%= bestLists[i].like_count%>Î™ÖÏù¥ Ï¢ãÏïÑÌï©ÎãàÎã§</span>
                                        </div>
                                        <p class="receipe__title"><%= bestLists[i].title %></p>
                                    </div>
                                    <figure>
                                        <%if(bestLists[i]['Recipe_Imgs.image_url']){%>
                                        <img src="<%= image_path%><%= bestLists[i]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}else {%>
                                        <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}%>
                                    </figure>
                                </a>
                            </li> 
                    <%}} else { %> 
                        <% for(let i = 0; i < bestLists.length ; i++){ %>    
                            <li class="swiper-slide">
                                <a href="/recipe/read?recipe_num=<%= bestLists[i].recipe_num%>">
                                    <div class="slide-bg">
                                        <div class="recipe__likescounts">
                                            <span class="fa-solid fa-heart"></span>
                                            <span><%= bestLists[i].like_count%>Î™ÖÏù¥ Ï¢ãÏïÑÌï©ÎãàÎã§</span>
                                        </div>
                                        <p class="receipe__title"><%= bestLists[i].title %></p>
                                    </div>
                                    <figure>
                                        <%if(bestLists[i]['Recipe_Imgs.image_url']){%>
                                        <img src="<%= image_path%><%= bestLists[i]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}else {%>
                                        <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                        <%}%>
                                    </figure>
                                </a>
                            </li>
                    <%}}} else { %> 
                        <li>ÌïòÏù¥Î≥º Î†àÏãúÌîºÎ•º Ïò¨Î†§Ï£ºÏÑ∏Ïöî</li>
                    <%}%>
                </ul>
            </div>
            <!-- right swiper -->
            <div class="recommend-rightSwiper">
                <ul class="swiper-wrapper">
                    <% if(bestLists){ %>
                    <% if(bestLists.length >= 10){ %>
                    <% for(let i = 1; i <= 10 ; i++){ %>
                        <% let index = i % 10; %>
                        <li class="swiper-slide">
                            <a href="/recipe/read?recipe_num=<%= bestLists[index].recipe_num%>">
                                <div class="slide-subbg"></div>
                                <figure>
                                    <%if(bestLists[index]['Recipe_Imgs.image_url']){%>
                                    <img src="<%= image_path%><%= bestLists[index]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                    <%}else {%>
                                    <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                    <%}%>
                                </figure>
                            </a>
                        </li>
                    <%}} else if(bestLists.length < 10 && listsALl.length > 1) {%> 
                    <% for(let i = 1; i < bestLists.length ; i++){ %>  
                        <% let index = i % 10; %>  
                        <li class="swiper-slide">
                            <a href="/recipe/read?recipe_num=<%= bestLists[index].recipe_num%>">
                                <div class="slide-subbg"></div>
                                <figure>
                                    <%if(bestLists[index]){%>
                                        <%if(bestLists[index]['Recipe_Imgs.image_url']){%>
                                        <img src="<%= image_path%><%= bestLists[index]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                    <%}}else {%>
                                    <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                                    <%}%>
                                </figure>
                            </a>
                        </li>
                    <%}}} else { %> 
                        <li>ÌïòÏù¥Î≥º Î†àÏãúÌîºÎ•º Ïò¨Î†§Ï£ºÏÑ∏Ïöî</li>
                    <%}%>
                </ul>
            </div>  
            <div class="swiper-control">
                <div class="swiper-pagination swiper-pagination-progressbar swiper-pagination-horizontal">
                    <span
                    class="swiper-pagination-progressbar-fill"
                    style="transform: translate3d(0px, 0px, 0px) scaleX(0.111111) scaleY(1); transition-duration: 300ms;"></span>
                </div>
                <div class="swiper-btnGroup">
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                </div>
            </div>          
        </div>
      </section>
      <section class="main__write">
        <div class="write-bg">
            <div class="bg-wrap">
                <div class="bg"></div>
                <div class="bubble-wrap"></div>
            </div>
        </div>
        <div class="write-content">
            <div>
                <figure>
                    <img src="/public/img/rabbit-icon.png" alt="ÏïÑÏù¥ÏΩò">
                </figure>
                <span>ÏûêÏã†ÎßåÏùò ÌïòÏù¥Î≥º Î†àÏãúÌîºÎ•º Í≥µÏú†Ìï¥Ï£ºÏÑ∏Ïöî!</span>
            </div>
            <% if(isLogin){ %>
                <a href="/recipe/write" class="main-writebtn">ÏûëÏÑ±ÌïòÍ∏∞</a>
            <% } else{ %>
                <a href="/users/login" class="login-link main-writebtn">ÏûëÏÑ±ÌïòÍ∏∞</a>
            <% }  %>
        </div>
      </section>
      <section class="main__list">
        <h2 class="list-title">üçªÎ†àÏãúÌîº Î™®Ïùå</h2>
        <nav class="recipe-category">
          <ul class="category-btn"></ul>
        </nav>
        <div class="recipe-list__container">
          <ul class="recipe-lists">
            <%if(listsALl){%> 
            <%if(listsALl.length >= 8){%> 
            <% for(let i = 0; i < 8; i++){ %>
            <li>
              <a
                href="/recipe/read?recipe_num=<%= listsALl[i].recipe_num%>"
              >
                <figure>
                    <%if(listsALl[i]['Recipe_Imgs.image_url']){%>
                        <img src="<%= image_path%><%= listsALl[i]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                    <%}else {%>
                        <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                    <%}%>
                </figure>
                <p class="recipe__writer">
                    <%= listsALl[i]['User.user_name'] %>
                  </p>
                <p class="recipe__title">
                  <%= listsALl[i].title %>
                </p>
              </a>
            </li>
            <% }} else if(listsALl.length < 8 && listsALl.length > 1) {%>
                <% for(let i = 0; i < listsALl.length; i++){ %>
                <li>
                    <a
                    href="/recipe/read?recipe_num=<%= listsALl[i].recipe_num%>"
                    >
                    <figure>
                        <%if(listsALl[i]['Recipe_Imgs.image_url']){%>
                            <img src="<%= image_path%><%= listsALl[i]['Recipe_Imgs.image_url'] %>" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                        <%}else {%>
                            <img src="/public/img/default_img.jpg" alt="Î†àÏãúÌîºÏù¥ÎØ∏ÏßÄ" class="recipe-list__img" />          
                        <%}%>
                    </figure>
                    <p class="recipe__writer">
                        <%= listsALl[i]['User.user_name'] %>
                        </p>
                    <p class="recipe__title">
                        <%= listsALl[i].title %>
                    </p>
                    </a>
                </li>
            <% }}} else{ %>
                <li></li>
            <% } %>
          </ul>
        </div>
        <div class="recipe-morebtn">
            <% if(listsALl){ %>
            <% if(listsALl.length > 8){ %>
                <button class="morebtn1 morebtn">+ ÎçîÎ≥¥Í∏∞</button>
            <% } %>
            <% } %>
        </div>
      </section>
    </main>
    <%- include('./partials/footer.ejs') %>
    <script src="/public/js/cookie.js"></script>
    <script src="/public/js/main.js"></script>
  </body>
</html>
